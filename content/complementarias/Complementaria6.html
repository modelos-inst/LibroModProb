
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Complementaria 6: Análisis de tiempos promedio &#8212; Libro Modelos Probabilísticos - IIND 2104</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=7815ba43" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/complementarias/Complementaria6';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Complementaria 9: Simulación de Montecarlo" href="Complementaria9.html" />
    <link rel="prev" title="Complementaria 5: Introducción a Dash" href="Complementaria5/Complementaria5_IntroDash.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/uniandes.png" class="logo__image only-light" alt="Libro Modelos Probabilísticos - IIND 2104 - Home"/>
    <img src="../../_static/uniandes.png" class="logo__image only-dark pst-js-only" alt="Libro Modelos Probabilísticos - IIND 2104 - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lecturas Semanales</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../lecturas_semanales/Modulo1.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 1: Introducción (Semana 1)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter0.html">Distribuciones de probabilidad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter1.html">Procesos estocásticos</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../lecturas_semanales/Modulo2.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 2: De un sistema real a un modelo (Semanas 2-8)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter2.html">Procesos de Poisson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter3.html">Cadenas de Markov</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter4.html">Análisis transitorio de cadenas de Markov</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter5.html">Clasificación de estados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter6.html">Probabilidades en estado estable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter7.html">Cadenas embebidas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter8.html">Análisis de tiempos promedios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter9.html">Cadenas absorbentes: Tiempos antes de la absorción y probabilidades de absorción</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../lecturas_semanales/Modulo3.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 3: Medir el sistema a través del modelo (Semanas 9-12)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter10.html">Ley de Little</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter11.html">Procesos de nacimiento y muerte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter13.html">Redes de Jackson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter14.html">Costos en cadenas de Markov</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../lecturas_semanales/Modulo4.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 4: Toma de decisiones para mejorar el sistema (Semanas 13-16)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter18.html">Procesos de Decisión Markovianos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter15.html">Procesos de decisión en el tiempo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter16.html">Principio de Optimalidad y Ecuaciones de Bellman</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lecturas_semanales/archivos/chapter17.html">Programación Dinámica</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Complementarias</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="Complementaria1.html"><h3 style="color: #ADD8E6;">Complementaria 1: Introducción a Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria2.html"><h3 style="color: #ADD8E6;">Complementaria 2: Álgebra Lineal en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria3.html"><h3 style="color: #ADD8E6;">Complementaria 3: Cadenas de Markov en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria4/Complementaria4.html"><h3 style="color: #ADD8E6;">Complementaria 4: Manejo de datos y análisis preliminar en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria5/Complementaria5_IntroDash.html"><h3 style="color: #ADD8E6;">Complementaria 5: Introducción a Dash</h3></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><h3 style="color: #ADD8E6;">Complementaria 6: Análisis de tiempos promedio</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria9.html"><h3 style="color: #ADD8E6;">Complementaria 9: Simulación de Montecarlo</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria10.html"><h3 style="color: #ADD8E6;">Complementaria 10: MDP en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="Complementaria11.html"><h3 style="color: #ADD8E6;">Complementaria 11: SDP en Python</h3></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/content/complementarias/Complementaria6.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1><h3 style="color: #ADD8E6;">Complementaria 6: Análisis de tiempos promedio</h3></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="complementaria-6-analisis-de-tiempos-promedio">
<h1><h3 style="color: #ADD8E6;">Complementaria 6: Análisis de tiempos promedio</h3><a class="headerlink" href="#complementaria-6-analisis-de-tiempos-promedio" title="Link to this heading">#</a></h1>
<p>En este tutorial se abordará el tema de análisis de tiempos en cadenas de Markov a través de un ejemplo. Para esto, utilizaremos la librería <code class="docutils literal notranslate"><span class="pre">jmarkov</span></code>.</p>
<h3 style="color: #ADD8E6;">Modelación del proceso de producción en una fábrica de papel</h3><p>Vamos a resolver el problema del archivo “Complementaria 6(Q).pdf” que se encuentra en Bloque Neón.</p>
<h4 style="color: #ADD8E6;">Literal a</h4><p>En primer lugar, se modelará la situación como una cadena de Markov de tiempo continuo. Se definen tres variables de estado:</p>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{split}
X(t) = \text{número de unidades en la zona de prensas en el tiempo } t\\\end{split}\\\begin{split}Y(t) = \text{número de unidades en la zona de recubrimiento en el tiempo } t\\\end{split}\\Z(t) = \text{número de unidades en la zona de alisado en el tiempo } t
\end{aligned}\end{align} \]</div>
<div class="math notranslate nohighlight">
\[ \begin{align}\begin{aligned}\begin{split}
S_X = \{0,1,2,3\}\\\end{split}\\\begin{split}S_Y = \{0,1,2\}\\\end{split}\\\begin{split}S_Z = \{0,1,2\}\\\end{split}\\\begin{split}W(t) = (X(t),Y(t),Z(t))\\\end{split}\\S_W = \{(i,j,k), \forall i \in S_X , j \in S_Y , k \in S_Z\}
\end{aligned}\end{align} \]</div>
<p>Vamos a crear el espacio de estados del problema en Python, haciendo tres recorridos, de la siguiente forma:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">estados</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">estados</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">j</span><span class="si">}</span><span class="s2">,</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            
<span class="n">estados</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;0,0,0&#39;,
 &#39;0,0,1&#39;,
 &#39;0,0,2&#39;,
 &#39;0,1,0&#39;,
 &#39;0,1,1&#39;,
 &#39;0,1,2&#39;,
 &#39;0,2,0&#39;,
 &#39;0,2,1&#39;,
 &#39;0,2,2&#39;,
 &#39;1,0,0&#39;,
 &#39;1,0,1&#39;,
 &#39;1,0,2&#39;,
 &#39;1,1,0&#39;,
 &#39;1,1,1&#39;,
 &#39;1,1,2&#39;,
 &#39;1,2,0&#39;,
 &#39;1,2,1&#39;,
 &#39;1,2,2&#39;,
 &#39;2,0,0&#39;,
 &#39;2,0,1&#39;,
 &#39;2,0,2&#39;,
 &#39;2,1,0&#39;,
 &#39;2,1,1&#39;,
 &#39;2,1,2&#39;,
 &#39;2,2,0&#39;,
 &#39;2,2,1&#39;,
 &#39;2,2,2&#39;,
 &#39;3,0,0&#39;,
 &#39;3,0,1&#39;,
 &#39;3,0,2&#39;,
 &#39;3,1,0&#39;,
 &#39;3,1,1&#39;,
 &#39;3,1,2&#39;,
 &#39;3,2,0&#39;,
 &#39;3,2,1&#39;,
 &#39;3,2,2&#39;]
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>36
</pre></div>
</div>
</div>
</div>
<p>Podemos ver que nuestra cadena de Markov tiene 36 estados. Ahora bien, tenemos la siguiente formulación general para las tasas de transición entre estados:</p>
<div class="math notranslate nohighlight">
\[\begin{split}
\mathbb{Q}_{(i,j,k) \rightarrow (l,m,n)} = \begin{cases}
0.05 &amp; l=i+1 &amp; m=j &amp; n=k &amp; i&lt;3 \\
11/12 \cdot 0.2 &amp; l=i &amp; m=j &amp; n=k-1 &amp; k&gt;0 \\
0.125 \cdot \min(j,2) &amp; l=i &amp; m=j-1 &amp; n=k+1 &amp; j&gt;0 &amp; k&lt;2 \\
0.104 &amp; l=i-1 &amp; m=j+1 &amp; n=k &amp; i&gt;0 &amp; j&lt;2 \\
0 &amp; \text{d.l.c}
\end{cases}
\end{split}\]</div>
<p>Con la formulación general, podemos definir la matriz de tasas de transición. Primero, vamos a crear una matriz de dimensión <span class="math notranslate nohighlight">\(36 \times 36\)</span> y, para inicializarla, todas las entradas de la misma serán iguales a 0. También vamos a definir los nombres de las filas y columnas de la matriz.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="n">matrizQ</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora, vamos a convertir esta matriz en un Dataframe para asignarle nombre a cada fila y columna de nuestra matriz.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">matrizQ</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">matrizQ</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">estados</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">estados</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora, utilizando la formulación general, vamos a determinar los valores de cada entrada de la matriz. Nuestro espacio de estados es un vector que contiene elementos de tipo String, y cada elemento contiene información sobre el estado de las variables <span class="math notranslate nohighlight">\(X(t), Y(t)\)</span> y <span class="math notranslate nohighlight">\(Z(t)\)</span>. Por ejemplo, el estado 1 es representado de la siguiente forma:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">estados</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;0,0,0&#39;
</pre></div>
</div>
</div>
</div>
<p>Si queremos conocer el valor del estado de cada variable <span class="math notranslate nohighlight">\(X(t), Y(t)\)</span> y <span class="math notranslate nohighlight">\(Z(t)\)</span>, debemos separar cada elemento del vector por comas. Esto se realiza mediante la función <code class="docutils literal notranslate"><span class="pre">texto.split()</span></code> de Python. El objeto <code class="docutils literal notranslate"><span class="pre">texto</span></code> es una cadena de caracteres que contiene los elementos de tipo character o string, y deseamos separar cada uno de estos elementos. Dentro de la función <code class="docutils literal notranslate"><span class="pre">split</span></code>debemos indicar cuál será el caracter encargado de separar los elementos (en este caso es la coma). Vamos a realizar un ejemplo para separar el estado 1 (“0,0,0”):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">estados</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([0, 0, 0])
</pre></div>
</div>
</div>
</div>
<p>Conociendo el uso de la función <code class="docutils literal notranslate"><span class="pre">split</span></code>, podemos hacer dos recorridos sobre el espacio de estados para crear la matriz de transición.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">fila</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">columna</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
        <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">fila</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        
        <span class="n">l</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">n</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">columna</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        
        <span class="c1">#Definición de la matriz de tasas de transición, de acuerdo con la formulación general mostrada antes.</span>
        
        <span class="c1">#Llegadas a la primera zona (prensas presión)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">3</span> <span class="ow">and</span> <span class="n">l</span><span class="o">==</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">m</span><span class="o">==</span><span class="n">j</span> <span class="ow">and</span> <span class="n">n</span><span class="o">==</span><span class="n">k</span><span class="p">:</span>
            <span class="n">matrizQ</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fila</span><span class="p">,</span><span class="n">columna</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.05</span>
        
        <span class="c1">#Procesamiento máquina satinadora (zona 3)</span>
        <span class="k">if</span> <span class="n">k</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">l</span><span class="o">==</span><span class="n">i</span> <span class="ow">and</span> <span class="n">m</span><span class="o">==</span><span class="n">j</span> <span class="ow">and</span> <span class="n">n</span><span class="o">==</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">matrizQ</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fila</span><span class="p">,</span><span class="n">columna</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">11</span><span class="o">/</span><span class="mi">12</span><span class="p">)</span><span class="o">*</span><span class="mf">0.2</span>
        
        <span class="c1">#Procesamiento zona recubrimiento (zona 2)</span>
        <span class="k">if</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">k</span><span class="o">&lt;</span><span class="mi">2</span> <span class="ow">and</span> <span class="n">l</span><span class="o">==</span><span class="n">i</span> <span class="ow">and</span> <span class="n">m</span><span class="o">==</span><span class="n">j</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">n</span><span class="o">==</span><span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">matrizQ</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fila</span><span class="p">,</span><span class="n">columna</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.125</span><span class="o">*</span><span class="nb">min</span><span class="p">(</span><span class="n">j</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            
        <span class="c1">#Procesamiento prensa presión (zona 1)</span>
        <span class="k">if</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span> <span class="ow">and</span> <span class="n">j</span><span class="o">&lt;</span><span class="mi">2</span> <span class="ow">and</span> <span class="n">l</span><span class="o">==</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">m</span><span class="o">==</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">n</span><span class="o">==</span><span class="n">k</span><span class="p">:</span>
            <span class="n">matrizQ</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">fila</span><span class="p">,</span><span class="n">columna</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.1036605</span>
        
</pre></div>
</div>
</div>
</div>
<p>En los recorridos anteriores únicamente definimos las tasas de transición entre estados diferentes; no obstante, también debemos asignar los valores correspondientes a la diagonal de la matriz. Como es sabido, el valor de la diagonal será el negativo de la suma de toda la fila:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)):</span>
    <span class="c1"># Diagonal: negativo de la suma de la fila</span>
    <span class="n">matrizQ</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">matrizQ</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="p">:])</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora, vamos a crear la cadena de Markov utilizando la librería <code class="docutils literal notranslate"><span class="pre">jmarkov</span></code>. Para ello, debemos volver a hacer que la matriz que creamos sea de tipo <code class="docutils literal notranslate"><span class="pre">np.array</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">matrizQ</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrizQ</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jmarkov.ctmc</span> <span class="kn">import</span> <span class="n">ctmc</span>

<span class="n">cadenaContinua</span> <span class="o">=</span> <span class="n">ctmc</span><span class="p">(</span><span class="n">matrizQ</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<h4 style="color: #ADD8E6;">Literal b</h4><p>En el literal b se indica que el Gerente de Planta trabaja de 8:00 am a 3:00 pm. Hoy a las 8:00 am él observó que no había ningún rollo siendo procesado en toda el área de fabricación, y desea conocer qué proporción del tiempo va a observar los Input Buffers de las tres zonas completamente llenos, hasta las 3:00 pm. De 8:00 am a 3:00 pm hay 7 horas, es decir, 25,200 segundos.</p>
<p>Así pues, necesitamos calcular la matriz de ocupación para resolver este literal. Con la matriz de ocupación podemos estimar cuánto tiempo estarán las tres zonas completamente llenas, es decir, cuánto tiempo durante esas 7 horas el sistema estará en el estado <span class="math notranslate nohighlight">\((3,2,2)\)</span>.</p>
<p>Para ello, usaremos la función <code class="docutils literal notranslate"><span class="pre">occupation_time(t)</span></code> de la librería <code class="docutils literal notranslate"><span class="pre">jmarkov</span></code>, en donde el argumento <code class="docutils literal notranslate"><span class="pre">t</span></code> representa el tiempo para el cual se quiere hacer el análisis de la matriz de tiempos de ocupación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">t_total</span> <span class="o">=</span> <span class="mi">25200</span>
<span class="n">matrizTiempos</span> <span class="o">=</span> <span class="n">cadenaContinua</span><span class="o">.</span><span class="n">occupation_time</span><span class="p">(</span><span class="n">t_total</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>Una vez generada la matriz de tiempos de ocupación, es necesario recuperar la fila asociada al estado (0,0,0) y la columna asociada al estado (1,1,1). Para ello, se usará la función <code class="docutils literal notranslate"><span class="pre">index(estado)</span></code> la cual recupera la posición en la matriz asociada al <code class="docutils literal notranslate"><span class="pre">estado</span></code>de interés.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">tiempo</span> <span class="o">=</span> <span class="n">matrizTiempos</span><span class="p">[</span><span class="n">estados</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;0,0,0&#39;</span><span class="p">),</span> <span class="n">estados</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;3,2,2&#39;</span><span class="p">)]</span>
<span class="n">tiempo</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>3.279451538778562
</pre></div>
</div>
</div>
</div>
<p>Luego, el tiempo es de aproximadamente 3.28 segundos. Sin embargo, debido a que nos preguntan sobre la proporción del tiempo que todas las estaciones permanecen ocupadas, se calcula la proporción dividiendo el tiempo obtenido sobre el tiempo total de observación:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">proporcion</span> <span class="o">=</span> <span class="n">tiempo</span><span class="o">/</span><span class="n">t_total</span>
<span class="n">proporcion</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.00013013696582454612
</pre></div>
</div>
</div>
</div>
<p>Finalmente, obtenemos que la proporción del tiempo que las estaciones permanecen llenas es del 0.013%.</p>
<h4 style="color: #ADD8E6;">Literal c</h4><p>En el literal c, debemos calcular el tiempo promedio que un rollo de papel permanece en el área de fabricación. El tiempo que un rollo permanece en el área (W) se puede hallar mediante la Ley de Little:</p>
<div class="math notranslate nohighlight">
\[
L = \lambda \cdot W
\]</div>
<p>Podemos hallar el número de rollos promedio en estado estable (L), así:</p>
<div class="math notranslate nohighlight">
\[
L= \sum_{(i,j,k) \in S_{W}}{(i+j+k)\cdot \pi_{i,j,k}}
\]</div>
<p>Para esto debemos verificar que la cadena sea irreducible (usando la función <code class="docutils literal notranslate"><span class="pre">is_irreducible()</span></code>) y luego, hallar las probabilidades en estado estable (con la función <code class="docutils literal notranslate"><span class="pre">steady_state()</span></code>):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cadenaContinua</span><span class="o">.</span><span class="n">is_irreducible</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
</div>
</div>
<p>Vamos a realizar el cálculo de <span class="math notranslate nohighlight">\(L\)</span> de acuerdo con la ecuación presentada anteriormente:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Inicializamos el valor de L en 0.</span>
<span class="n">LEstadoEstable</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">#Vamos a crear la variable &quot;indice&quot;: el número del estado que estamos evaluando.</span>
<span class="n">indice</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1">#Creamos el vector de Estado Estable</span>
<span class="n">estadoEstable</span> <span class="o">=</span> <span class="n">cadenaContinua</span><span class="o">.</span><span class="n">steady_state</span><span class="p">()</span>

<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
    <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">e</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
    <span class="n">LEstadoEstable</span> <span class="o">=</span> <span class="n">LEstadoEstable</span> <span class="o">+</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="n">j</span><span class="o">+</span><span class="n">k</span><span class="p">)</span><span class="o">*</span><span class="n">estadoEstable</span><span class="p">[</span><span class="n">indice</span><span class="p">]</span>
    
    <span class="n">indice</span> <span class="o">=</span> <span class="n">indice</span><span class="o">+</span><span class="mi">1</span>
  
<span class="n">LEstadoEstable</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1.4576733281181173
</pre></div>
</div>
</div>
</div>
<p>Con esto, obtenemos que: <span class="math notranslate nohighlight">\(L=1.458\)</span> rollos.</p>
<h4 style="color: #ADD8E6;">Literal d</h4><p>En el literal d, se indica que en este momento hay un rollo en cada una de las zonas del área de fabricación, y se desea conocer cuál es el tiempo promedio que transcurrirá antes de que las tres zonas se encuentren totalmente llenas. Para responder a esta pregunta, debemos hallar el tiempo de primera pasada <span class="math notranslate nohighlight">\(m_{(1,1,1),(3,2,2)}\)</span>.</p>
<p>Es posible realizar este cálculo con la función <code class="docutils literal notranslate"><span class="pre">first_passage_time(target)[inicial]</span></code> de la librería <code class="docutils literal notranslate"><span class="pre">jmarkov</span></code>. Donde <code class="docutils literal notranslate"><span class="pre">target</span></code> es el estado futuro al que se quiere llegar. Esta función genera un array, en donde cada elemento corresponde al posible estado inicial sobre el cual se quiere hacer el cálculo de tiempo de primera pasada. De esta manera, el parámetro <code class="docutils literal notranslate"><span class="pre">target</span></code> debe indicar el estado al que se quiere llegar, y sobre el array resultado se debe llamar la posición asociada al estado (1,1,1) (que corresponde al argumento <code class="docutils literal notranslate"><span class="pre">[inicial]</span></code> de la explicación anterior). Por lo tanto:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cadenaContinua</span><span class="o">.</span><span class="n">first_passage_time</span><span class="p">(</span><span class="n">estados</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;3,2,2&#39;</span><span class="p">))[</span><span class="n">estados</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;1,1,1&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([44362.97918331])
</pre></div>
</div>
</div>
</div>
<p>El tiempo promedio que transcurre desde el estado (1,1,1) hasta visitar por primera vez el estado (3,2,2) es de 44362 segundos, o 12.32 horas.</p>
<p>Universidad de los Andes | Vigilada Mineducación. Reconocimiento como Universidad: Decreto 1297 del 30 de mayo de 1964. Reconocimiento personería jurídica: Resolución 28 del 23 de febrero de 1949 Minjusticia. Departamento de Ingeniería Industrial Carrera 1 Este No. 19 A 40 Bogotá, Colombia Tel. (57.1) 3324320 | (57.1) 3394949 Ext. 2880 /2881 <a class="reference external" href="http://industrial.uniandes.edu.co">http://industrial.uniandes.edu.co</a></p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\complementarias"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Complementaria5/Complementaria5_IntroDash.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><h3 style="color: #ADD8E6;">Complementaria 5: Introducción a Dash</h3></p>
      </div>
    </a>
    <a class="right-next"
       href="Complementaria9.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><h3 style="color: #ADD8E6;">Complementaria 9: Simulación de Montecarlo</h3></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Equipo Modelos Probabilísticos
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>