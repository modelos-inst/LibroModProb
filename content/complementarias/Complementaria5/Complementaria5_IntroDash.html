
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Complementaria 5: Introducción a Dash &#8212; Libro Modelos Probabilísticos - IIND 2104</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=1159f955" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/complementarias/Complementaria5/Complementaria5_IntroDash';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Complementaria 6: Análisis de tiempos promedio" href="../Complementaria6.html" />
    <link rel="prev" title="Complementaria 4: Manejo de datos y análisis preliminar en Python" href="../Complementaria4/Complementaria4.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/uniandes.png" class="logo__image only-light" alt="Libro Modelos Probabilísticos - IIND 2104 - Home"/>
    <img src="../../../_static/uniandes.png" class="logo__image only-dark pst-js-only" alt="Libro Modelos Probabilísticos - IIND 2104 - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Lecturas Semanales</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../lecturas_semanales/Modulo1.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 1: Introducción (Semana 1)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter0.html">Distribuciones de probabilidad</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter1.html">Procesos estocásticos</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../lecturas_semanales/Modulo2.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 2: De un sistema real a un modelo (Semanas 2-8)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter2.html">Procesos de Poisson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter3.html">Cadenas de Markov</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter4.html">Análisis transitorio de cadenas de Markov</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter5.html">Clasificación de estados</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter6.html">Probabilidades en estado estable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter7.html">Cadenas embebidas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter8.html">Análisis de tiempos promedios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter9.html">Cadenas absorbentes: Tiempos antes de la absorción y probabilidades de absorción</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../lecturas_semanales/Modulo3.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 3: Medir el sistema a través del modelo (Semanas 9-12)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter10.html">Ley de Little</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter11.html">Procesos de nacimiento y muerte</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter12.html">Teoría de Colas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter13.html">Redes de Jackson</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter14.html">Costos en cadenas de Markov</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../lecturas_semanales/Modulo4.html"><span style="color:#86A8B3; font-weight: bold;">Módulo 4: Toma de decisiones para mejorar el sistema (Semanas 13-16)</span></a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter18.html">Procesos de Decisión Markovianos</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter15.html">Procesos de decisión en el tiempo</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter17.html">Programación Dinámica</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lecturas_semanales/archivos/chapter16.html">Principio de Optimalidad y Ecuaciones de Bellman</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Complementarias</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../Tutorial/tutorial.html"><h3 style="color: #ADD8E6;">Tutorial: Instalación Python y Visual Studio Code</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../AmbientesVirtuales/Ambientes_virtuales.html"><h3 style="color: #ADD8E6;">Ambientes Virtuales en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria1.html"><h3 style="color: #ADD8E6;">Complementaria 1: Introducción a Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria2.html"><h3 style="color: #ADD8E6;">Complementaria 2: Álgebra Lineal en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria3.html"><h3 style="color: #ADD8E6;">Complementaria 3: Cadenas de Markov en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria4/Complementaria4.html"><h3 style="color: #ADD8E6;">Complementaria 4: Manejo de datos y análisis preliminar en Python</h3></a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><h3 style="color: #ADD8E6;">Complementaria 5: Introducción a Dash</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria6.html"><h3 style="color: #ADD8E6;">Complementaria 6: Análisis de tiempos promedio</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria9.html"><h3 style="color: #ADD8E6;">Complementaria 9: Simulación de Montecarlo</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria10.html"><h3 style="color: #ADD8E6;">Complementaria 10: MDP en Python</h3></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Complementaria11.html"><h3 style="color: #ADD8E6;">Complementaria 11: SDP en Python</h3></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/content/complementarias/Complementaria5/Complementaria5_IntroDash.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1><h3 style="color: #ADD8E6;">Complementaria 5: Introducción a Dash</h3></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="complementaria-5-introduccion-a-dash">
<h1><h3 style="color: #ADD8E6;">Complementaria 5: Introducción a Dash</h3><a class="headerlink" href="#complementaria-5-introduccion-a-dash" title="Link to this heading">#</a></h1>
<p>Este es un tutorial para construir un tablero web con funcionalidades básicas usando el paquete dash del software Python.</p>
<h3 style="color: #ADD8E6;">Ejemplo de una aplicación Dashboard</h3><p>En Bloque Neón descargue el archivo <strong>app_ejemplo.py</strong>, abralo en VSCode y ejecutelo. El programa abrirá el terminar, donde se ejecutará el siguiente comando:
<img alt="image.png" src="../../../_images/ambiente_ejecucion.png" /></p>
<p>Una vez ejecutado el archivo, en su navegador de preferencia (Chrome, Firefox, Safari, Edge) visite el servidor local usando el puerto 8050, es decir, vaya a la página:</p>
<p><a class="reference external" href="http://127.0.0.1:8050/">http://127.0.0.1:8050/</a></p>
<p>Dentro del archivo <strong>app_ejemplo.py</strong> se pueden identificar múltiples elementos. El primero es un enlace de estilos CSS que permitirá construir la herramienta Dashboard y se guarda en la variable <em>external_stylesheets</em>. También se puede identificar al objeto app, del cual se extrae el atributo server. Adicionalmente, se cuenta con una función <em>app.layout</em> donde se agregan elementos como deslizadores (<code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">dcc.Slider()</code>) y gráficas (<code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">dcc.Graph()</code>) , es decir, donde se describe la interfaz gráfica de la aplicación. Finalmente, se cuenta con una función <em>update_figure</em> que junto al decorador <code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">app.Callback()</code> , va a actualizar la información de la gráfica de forma automática cuando el usuario interactúe con el deslizador.</p>
<h2 style="color: #ADD8E6;">Aplicación Políticas de Inventario en una fábrica de papel</h2><p>En esta parte, se desea construir una herramienta que permita evaluar los costos de dos políticas de inventario consideradas por una fábrica de resmas de papel.</p>
<h3 style="color: #ADD8E6;">Creación de interfaz gráfica</h3><p>Se desea construir una interfaz donde se muestre un panel interactivo en el que el usuario pueda variar los parámetros del análisis (en este caso la tasa de la demanda de resmas de papel), y una gráfica con este análisis (el costo total en el que incurre la empresa por políticas de inventario). Para esto, se hará uso de un deslizador (dcc.Slider), descrito con anterioridad, que se mostrará en la parte lateral izquierda de la página y una gráfica que será el contenido principal en la página.</p>
<p>El resultado final debería ser:</p>
<p><img alt="image.png" src="../../../_images/Herramienta.png" /></p>
<p>Para crear una nueva aplicación Dashboard:</p>
<ul class="simple">
<li><p>Hacer click en la pestaña File</p></li>
<li><p>Seleccionar la opción New File</p></li>
<li><p>Seleccionar Python File</p></li>
</ul>
<p>Se recomienda guardar el archivo en una nueva carpeta a la que usted tenga fácil acceso.</p>
<p>En el nuevo archivo en blanco, primero se hace la importación de las librerías necesarias. Recuerde que debe tener instaladas las librerías en su computador, en caso de no contar con ellas acceda a su terminal e instale las librerías necesarias con el comando <strong>pip install</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Librerías para ejecutar el dash</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>  <span class="c1"># dash core components</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span> <span class="c1"># dash html components</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="c1">#Librería para graficar</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>
</pre></div>
</div>
</div>
</div>
<p>Posteriormente, se guarda el enlace a la hoja de estilos CSS, y se crea el objeto app:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Enlace a la hoja de estilos CSS y permite construir la herramiente Dash</span>
<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="c1">#Se crea el objeto app, dentro del cual se extrae el atributo server</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">server</span>
</pre></div>
</div>
</div>
</div>
<p>Procedemos a realizar el diseño de la interfaz. Se ubica un deslizador que permita seleccionar el valor del parámetro de la demanda. El layout del tablero, descrito por el objeto <em>app.layout</em>, se muestra a continuación:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Definir la interfaz de la aplicación</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="c1"># titulo de la aplicación</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s1">&#39;Aplicación Políticas de Inventario&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;textAlign&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">}),</span>

    <span class="c1">#Se realiza la división de recuadros entre el título y los demás objetos</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="c1">#imprimir gráfica de costos</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;Graf_Cost_Tot&#39;</span><span class="p">),</span>

    <span class="c1">#Crear objeto para ingresar parametro de tasa de demanda con un control deslizante</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;TasaDemanda&#39;</span><span class="p">,</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
            <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="p">),</span>
    
    <span class="c1">#Crear objeto para especificar la tasa seleccionada por el usuario y las unidades</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;valorSlider&#39;</span><span class="p">)</span>
    <span class="p">])</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<p><u><strong>Debajo</strong></u> de la función <em>app.layout</em>, se debe incorporar el siguiente comando de ejecución de la aplicación el cual permitirá iniciar un servidor y por lo tanto, lanzar nuestra herramienta Dash</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>La aplicación en este momento debería verse así:
<img alt="image.png" src="../../../_images/Herramienta_Inicio.png" /></p>
<h3 style="color: #ADD8E6;">Creación de la lógica de aplicación</h3><p>Hasta el momento, se tiene el esqueleto de una interfaz. Sin embargo, para que esta realice cualquier acción, se requiere la incorporación de funciones que con ayuda del decorador &#64;app.callback actualicen la aplicación. Dentro del decorador se van a ingresar todos los Outputs o salidas que se desean actualizar a partir de los Inputs o entradas que se ven modificadas. Para esto se va a crear la nueva función update_graph donde se definirá la lógica que estará por debajo de la generación de las gráficas de la evolución de costos de cada política durante 10 semanas. Lo anterior se puede realizar de dos maneras:</p>
<ol class="arabic simple">
<li><p>Implementando directamente en el server todo el código necesario.</p></li>
<li><p>Implementando funciones en un documento de Python (.py) aparte, que serán llamadas dentro de la función <em>update_fig</em> de acuerdo a los requerimientos necesarios, ejecutando el código de dicho script, en lo posible, solo una vez.</p></li>
</ol>
<p>Con base en las dos anteriores formas de implementación del código, en el presente tutorial se seguirá la segunda metodología.</p>
<p><span style="color: red; font-weight: bold;">Nota: </span> Se recomienda realizar sus aplicativos de Dashboard siguiendo la segunda metodología, puesto que, si se sigue la primera propuesta, en el caso de presentarse múltiples outputs, la ejecución del código puede ser ineficiente. Lo anterior, debido a que para cada uno de estos outputs, debe ejecutarse el mismo código.</p>
<p>Volviendo al ejemplo de la fábrica de resmas de papel, se deben implementar, en un nuevo script .py, dos modelos de cadena de Markov de tiempo discreto, uno para cada política de inventario. A partir de estos modelos, se estimarán los costos requeridos usando análisis transitorio. Es importante denotar que <u>dicho script debe ser guardado dentro de la carpeta resultante</u> al crear el aplicativo de Dashboard.</p>
<p>Para calcular las probabilidades de transición de la anteriores cadenas de Markov, se debe tener en cuenta que la demanda semanal se distribuye Poisson. Para calcular las probabilidades de Poisson, se utiliza la librería <strong>scipy.stats</strong>, específicamente la clase <strong>poisson</strong>. Esta clase tiene como parámetros el valor de <em>k</em> y de <span class="math notranslate nohighlight">\(\lambda\)</span>.</p>
<ul class="simple">
<li><p>Si se quiere obtener la probabilidad puntual, se utiliza la función <code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">poisson.pmf()</code>, que es equivalente a realizar el cálculo
$<span class="math notranslate nohighlight">\(P(X=k) = \frac{e^{-\lambda} \cdot (\lambda)^{k}}{k!}.\)</span>$</p></li>
<li><p>Si queremos calcular el valor de la probabilidad acumulada, utilizamos la función <code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">poisson.cdf()</code>, la cual calcula
$<span class="math notranslate nohighlight">\(P(X\leq k) = \sum_{i=0}^{k} \frac{e^{-\lambda} \cdot (\lambda)^{k}}{k!}.\)</span>$</p></li>
<li><p>Si queremos calcular la probabilidad acumulada de <strong>cola derecha</strong> utilizamos la función <code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">poisson.sf()</code>, la cual calcula $<span class="math notranslate nohighlight">\(P(X&gt; k).\)</span>$</p></li>
</ul>
<p>Estas dos funciones descritas anteriormente se utilizarán más adelante para llenar las matrices de probabilidades de transición de los dos modelos.</p>
<p>A continuación, se desarrolla un nuevo script de python, que llamaremos “<a class="reference external" href="http://Funciones.py">Funciones.py</a>”.</p>
<p>Antes de escribir cualquier cosa, se deben cargar (y de ser necesario, instalar) las librerías <strong>pandas</strong>, <strong>numpy</strong>, <strong>jmarkov</strong> (específicamente la clase dtmc para cadenas discretas) y <strong>scipy.stats</strong> (específicamente la clase poisson).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Librerías que vamos a utilizar</span>
<span class="c1">## Recuerde hacer pip install en el cmd si no ha instalado alguna de ellas</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">poisson</span>
<span class="kn">from</span> <span class="nn">jmarkov.dtmc</span> <span class="kn">import</span> <span class="n">dtmc</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora, se escribe una función donde se implementa el código necesario para los dos modelos ya mencionados, calcular los costos semanales y, a partir de esto, generar una gráfica que represente la evolución de tales costos en las próximas 10 semanas. Dicha función recibe como parámetro un objeto “tasa” que representará la tasa de la demanda semanal, la cual variaremos desde el <strong>app.layout</strong>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Crear la función que realice los procedimientos necesarios.</span>
<span class="c1"># En este caso se busca crear los objetos cadenas de markov para ambas políticas, </span>
<span class="c1"># realizar el análisis transitorio para las 10 semanas y obtener los respectivos costos</span>
<span class="k">def</span> <span class="nf">Shiny_function</span><span class="p">(</span><span class="n">tasa</span><span class="p">):</span>
    
    <span class="c1">#Crear los estados</span>
    <span class="n">estados</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>

    <span class="c1">#*****Crear y llenar la matriz P de la política actual*****</span>
    <span class="n">matrizP</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>

    <span class="c1">#Para la Política Actual -&gt; si i&lt;=10 solicita 12 resmas</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">12</span><span class="o">+</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span> <span class="c1">#poisson.pmf calcula P(D=k)</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="mi">12</span><span class="o">+</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span> <span class="c1"># poisson.smf calcula P(D&gt;k). </span>
                                                        <span class="c1"># Por esto es necesario restar 1 unidad.</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>

    
    <span class="c1">#Crear y llenar la matriz P para el caso de la Política Nueva</span>
    <span class="n">matrizPNueva</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>
    
    <span class="c1">#Para la nueva Política  -&gt; solicitar hasta la capacidad máxima</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
               <span class="n">matrizPNueva</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">22</span><span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">j</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizPNueva</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>

    <span class="c1">#Crear las dos cadenas usando el paquete jmarkov</span>
    <span class="c1"># Política Actual</span>
    <span class="n">politica_Actual</span> <span class="o">=</span> <span class="n">dtmc</span><span class="p">(</span><span class="n">matrizP</span><span class="p">)</span>
    <span class="c1"># Política Nueva</span>
    <span class="n">politica_Nueva</span> <span class="o">=</span> <span class="n">dtmc</span><span class="p">(</span><span class="n">matrizPNueva</span><span class="p">)</span>

    <span class="c1"># Valor de los costos de inventario y de ordenar</span>
    <span class="n">cInventario</span> <span class="o">=</span> <span class="mi">6200</span>
    <span class="n">cOrdenar</span> <span class="o">=</span> <span class="mi">38000</span>

    <span class="c1"># Estimar los costos para las próximas 10 semanas</span>
    <span class="c1"># Definir vector de estado inicial dado que al final de esta semana quedaron cero unidades en inventario</span>
    <span class="n">alfa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">))</span>
    <span class="n">alfa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># Calcula el vector de costos de la política actual </span>
    <span class="n">cost_Sem_Pactual</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Calcula el costo de inventario y el costo de ordenar promedio de la política actual</span>
    <span class="n">cost_inv_Pactual</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cost_ord_Pactual</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
        <span class="n">probs</span> <span class="o">=</span> <span class="n">politica_Actual</span><span class="o">.</span><span class="n">transient_probabilities</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alfa</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">cInventario</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">estados</span><span class="p">))</span>
        <span class="n">cost_inv_Pactual</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cInventario</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">estados</span><span class="p">))</span>
        <span class="n">cost_ord_Pactual</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cOrdenar</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]))</span>

    <span class="n">cost_Sem_Pactual</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cost_inv_Pactual</span><span class="p">,</span> <span class="n">cost_ord_Pactual</span><span class="p">)</span>

    <span class="c1"># Calcula el vector de costos de la política nueva</span>
    <span class="n">cost_Sem_Pnueva</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Calcula el costo de inventario y el costo de ordenar promedio de la política nueva</span>
    <span class="n">cost_inv_Pnueva</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cost_ord_Pnueva</span> <span class="o">=</span> <span class="p">[]</span> 
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
        <span class="n">probs</span> <span class="o">=</span> <span class="n">politica_Nueva</span><span class="o">.</span><span class="n">transient_probabilities</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alfa</span><span class="p">)</span>
        
        <span class="n">cost_inv_Pnueva</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cInventario</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">estados</span><span class="p">))</span>
        <span class="n">cost_ord_Pnueva</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cOrdenar</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">21</span><span class="p">]))</span>
    
    <span class="n">cost_Sem_Pnueva</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cost_inv_Pnueva</span><span class="p">,</span> <span class="n">cost_ord_Pnueva</span><span class="p">)</span>

    <span class="c1"># Vector de número de semana </span>
    <span class="n">num_sem</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;numero_semana&#39;</span><span class="p">:</span> <span class="n">num_sem</span><span class="p">,</span>
        <span class="s1">&#39;costo_semanal_PolActual&#39;</span><span class="p">:</span> <span class="n">cost_Sem_Pactual</span><span class="p">,</span>
        <span class="s1">&#39;costo_semanal_PolNueva&#39;</span><span class="p">:</span> <span class="n">cost_Sem_Pnueva</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">data</span>
</pre></div>
</div>
</div>
</div>
<p>Por ende, si se observan las últimas líneas de la anterior función, es posible determinar que el valor que ésta retorna es un DataFrame, el cual se recupera en el server, como se muestra a continuación.</p>
<p>Primero, se debe vincular el aplicativo de Dashboard al script de Python que se desea utilizar como fuente. Para esto, se hace uso <code style="background-color: #cfcfcf; padding: 2px 4px; border-radius: 4px;color: black;">from</code>, el cual se define antes del enlace a la hoja de estilos CSS.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#Librerías para ejecutar el dash</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>  <span class="c1"># dash core components</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span> <span class="c1"># dash html components</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="c1">#Librería para graficar</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>

<span class="c1">#Este comando importa todas las funciones del archivo Funciones.py (debe encontrarse en la misma carpeta que el Dashboard)</span>
<span class="c1">## El archivo Funciones.py incluye la función donde anteriormente obteniamos los costos para las 10 semanas.</span>
<span class="kn">from</span> <span class="nn">Funciones</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1">#Enlace a la hoja de estilos CSS y permite construir la herramiente Dash</span>
<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="c1">#Se crea el objeto app, dentro del cual se extrae el atributo server</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">server</span>
</pre></div>
</div>
</div>
</div>
<p>Ahora, agregaremos la función &#64;app.callback <u><strong>ENTRE</strong></u> la función <em>app.layout</em> y el comando de ejecución de la aplicación que lanza la herramienta Dash.</p>
<p><span style="color: red; font-weight: bold;">Recordatorio: </span> el comando de ejecución de la aplicación es el siguiente:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

</pre></div>
</div>
<p>Luego, debe llamarse la funcion dash_function() que se encuentra en el archivo “<a class="reference external" href="http://Funciones.py">Funciones.py</a>”. La gráfica resultante se renderiza usando la clase <em>go</em> de la librería <em>plotly.graph_objs</em>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="c1"># Outputs que se van a modificar cuando el usuario interactua</span>
    <span class="p">[</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;Graf_Cost_Tot&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
     <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;valorSlider&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">)],</span>
     <span class="c1"># Input en el que se va a fijar el callback</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;TasaDemanda&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">Tasa</span><span class="p">):</span>
    <span class="c1"># Importamos la información de la funcion en Funciones.py</span>
    <span class="n">InfoCostos</span> <span class="o">=</span> <span class="n">dash_function</span><span class="p">(</span><span class="n">Tasa</span><span class="p">)</span>

    <span class="c1">#__________Generar gráfica de los costos para las próximas 10 semanas__________</span>
    <span class="c1"># cada variable trace guardada es una nueva curva a la gráfica</span>
    <span class="n">trace1</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;numero_semana&#39;</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;costo_semanal_PolActual&#39;</span><span class="p">],</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;P Actual&#39;</span>
    <span class="p">)</span>

    <span class="n">trace2</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;numero_semana&#39;</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;costo_semanal_PolNueva&#39;</span><span class="p">],</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;P nueva&#39;</span>
    <span class="p">)</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Costo por política en las próximas semanas&#39;</span><span class="p">,</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Semana&#39;</span><span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Costo&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">trace1</span><span class="p">,</span> <span class="n">trace2</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Tasa seleccionada: </span><span class="si">{</span><span class="n">Tasa</span><span class="si">}</span><span class="s1"> cajas/semana&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>Cabe resaltar que el objeto de salida Graf_Cost_Tot fue registrado en la función <em>app.layout</em>, para indicar qué tipo de objeto era (un gráfico de plotly en este caso) y en qué lugar de la interfaz debería aparecer este objeto. Mientras que en la función <em>update_fig</em> se define cómo renderizar este objeto gráfico. Puesto que se quiere que este gráfico cambie dinámicamente dependiendo del valor de la tasa de demanda que el usuario ingrese en la aplicación, al renderizar este objeto se debe incluir el parámetro TasaDemanda, el cual será ingresado como parámetro en la función Shiny_function(), la cual retorna un data frame que se guardará en una variable llamada “InfoCostos”. Se debe tener en cuenta que TasaDemanda es el inputId del objeto de entrada de la tasa de demanda y fue definido en la funcion <em>app.layout</em>. Para ejecutar el aplicativo Dashboard se hacer click en el botón “Run Python File” (triángulo en la esquina superior derecha), lo cual abrirá el terminal, luego, en su navegador (Chrome, Firefox, Safari, Edge) visite el servidor local usando el puerto 8050, es decir, vaya a la página:</p>
<p><a class="reference external" href="http://127.0.0.1:8050/">http://127.0.0.1:8050/</a></p>
<details>
<summary style="background-color: #ADD8E6; padding: 10px; border-radius: 5px; color:black;cursor: pointer;">Click aquí para ver el código completo del archivo Funciones.py</summary>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Script donde se llevaran a cabo todas las funciones</span>

<span class="c1"># Librerías que vamos a utilizar</span>
<span class="c1"># Recuerde emplear pip install en una terminal si no ha instalado alguna de ellas</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">poisson</span>
<span class="kn">from</span> <span class="nn">jmarkov.dtmc</span> <span class="kn">import</span> <span class="n">dtmc</span>

<span class="c1"># Crear la función que realice los procedimientos necesarios.</span>
<span class="c1"># En este caso se busca crear los objetos cadenas de markov para ambas políticas, </span>
<span class="c1"># realizar el análisis transitorio para las 10 semanas y obtener los respectivos costos</span>
<span class="k">def</span> <span class="nf">dash_function</span><span class="p">(</span><span class="n">tasa</span><span class="p">):</span>
    
    <span class="c1"># Crear los estados</span>
    <span class="n">estados</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">23</span><span class="p">)</span>

    <span class="c1"># Crear y llenar la matriz P de la política actual </span>
    <span class="n">matrizP</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>

    <span class="c1"># Para la Política Actual -&gt; si i&lt;=10 solicita 12 resmas</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">12</span><span class="o">+</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span> <span class="c1">#poisson.pmf calcula P(D=k)</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">&lt;=</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="mi">12</span><span class="o">+</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span> <span class="c1">#poisson.smf calcula P(D&gt;k). Por esto es necesario restar 1 unidad.</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">i</span><span class="o">&gt;</span><span class="mi">10</span> <span class="ow">and</span> <span class="n">j</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizP</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>

    
    <span class="c1"># Crear y llenar la matriz P para el caso de la Política Nueva</span>
    <span class="n">matrizPNueva</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">)),</span> <span class="n">dtype</span> <span class="o">=</span> <span class="nb">float</span><span class="p">)</span>
    
    <span class="c1"># Para la nueva Política  -&gt; solicitar hasta la capacidad máxima</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">estados</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">j</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
               <span class="n">matrizPNueva</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">poisson</span><span class="o">.</span><span class="n">pmf</span><span class="p">(</span><span class="mi">22</span><span class="o">-</span><span class="n">j</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">j</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="n">matrizPNueva</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">=</span><span class="n">poisson</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="n">tasa</span><span class="p">)</span>

    <span class="c1"># Crear las dos cadenas usando el paquete jmarkov</span>
    <span class="c1"># Política Actual</span>
    <span class="n">politica_Actual</span> <span class="o">=</span> <span class="n">dtmc</span><span class="p">(</span><span class="n">matrizP</span><span class="p">)</span>
    <span class="c1"># Política Nueva</span>
    <span class="n">politica_Nueva</span> <span class="o">=</span> <span class="n">dtmc</span><span class="p">(</span><span class="n">matrizPNueva</span><span class="p">)</span>

    <span class="c1"># Valor de los costos de inventario y de ordenar</span>
    <span class="n">cInventario</span> <span class="o">=</span> <span class="mi">6200</span>
    <span class="n">cOrdenar</span> <span class="o">=</span> <span class="mi">38000</span>

    <span class="c1"># Estimar los costos para las próximas 10 semanas</span>
    <span class="c1"># Definir vector de estado inicial dado que al final de esta semana quedaron cero unidades en inventario</span>
    <span class="n">alfa</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">estados</span><span class="p">))</span>
    <span class="n">alfa</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="c1"># Calcula el vector de costos de la política actual </span>
    <span class="n">cost_Sem_Pactual</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Calcula el costo de inventario y el costo de ordenar promedio de la política actual</span>
    <span class="n">cost_inv_Pactual</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cost_ord_Pactual</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
        <span class="n">probs</span> <span class="o">=</span> <span class="n">politica_Actual</span><span class="o">.</span><span class="n">transient_probabilities</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alfa</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">cInventario</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">estados</span><span class="p">))</span>
        <span class="n">cost_inv_Pactual</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cInventario</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">estados</span><span class="p">))</span>
        <span class="n">cost_ord_Pactual</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cOrdenar</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]))</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">cost_inv_Pactual</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">cost_ord_Pactual</span><span class="p">)</span>
    <span class="n">cost_Sem_Pactual</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cost_inv_Pactual</span><span class="p">,</span> <span class="n">cost_ord_Pactual</span><span class="p">)</span>

    <span class="c1"># Calcula el vector de costos de la política nueva</span>
    <span class="n">cost_Sem_Pnueva</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># Calcula el costo de inventario y el costo de ordenar promedio de la política nueva</span>
    <span class="n">cost_inv_Pnueva</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cost_ord_Pnueva</span> <span class="o">=</span> <span class="p">[]</span> 
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">):</span>
        <span class="n">probs</span> <span class="o">=</span> <span class="n">politica_Nueva</span><span class="o">.</span><span class="n">transient_probabilities</span><span class="p">(</span><span class="n">n</span> <span class="o">=</span> <span class="n">i</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="n">alfa</span><span class="p">)</span>
        
        <span class="n">cost_inv_Pnueva</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cInventario</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">probs</span><span class="p">,</span> <span class="n">estados</span><span class="p">))</span>
        <span class="n">cost_ord_Pnueva</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cOrdenar</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">probs</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">21</span><span class="p">]))</span>
    
    <span class="n">cost_Sem_Pnueva</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cost_inv_Pnueva</span><span class="p">,</span> <span class="n">cost_ord_Pnueva</span><span class="p">)</span>

    <span class="c1"># Vector de numero de semana</span>
    <span class="n">num_sem</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">11</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
        <span class="s1">&#39;numero_semana&#39;</span><span class="p">:</span> <span class="n">num_sem</span><span class="p">,</span>
        <span class="s1">&#39;costo_semanal_PolActual&#39;</span><span class="p">:</span> <span class="n">cost_Sem_Pactual</span><span class="p">,</span>
        <span class="s1">&#39;costo_semanal_PolNueva&#39;</span><span class="p">:</span> <span class="n">cost_Sem_Pnueva</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">data</span>
</pre></div>
</div>
<details>
<summary style="background-color: #ADD8E6; padding: 10px; border-radius: 5px; color:black;cursor: pointer;">Click aquí para ver el código completo del Dashboard</summary>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Librerías para ejecutar el dash</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">dcc</span>  <span class="c1"># dash core components</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span> <span class="c1"># dash html components</span>
<span class="kn">from</span> <span class="nn">dash.dependencies</span> <span class="kn">import</span> <span class="n">Input</span><span class="p">,</span> <span class="n">Output</span>

<span class="c1"># Librería para graficar</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objs</span> <span class="k">as</span> <span class="nn">go</span>

<span class="c1"># Este comando importa todas las funciones del archivo Funciones.py</span>
<span class="c1"># El archivo Funciones.py se debe encontrar en la misma carpeta que este documento.</span>
<span class="kn">from</span> <span class="nn">Funciones</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># Enlace a la hoja de estilos CSS y permite construir la herramiente Dash</span>
<span class="n">external_stylesheets</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;https://codepen.io/chriddyp/pen/bWLwgP.css&#39;</span><span class="p">]</span>

<span class="c1"># Se crea el objeto app, dentro del cual se extrae el atributo server</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">external_stylesheets</span><span class="o">=</span><span class="n">external_stylesheets</span><span class="p">)</span>
<span class="n">server</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">server</span>

<span class="c1"># Definir la interfaz de la aplicación</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="c1"># Titulo de la aplicación</span>
    <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="s1">&#39;Aplicación Políticas de Inventario&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;textAlign&#39;</span><span class="p">:</span> <span class="s1">&#39;center&#39;</span><span class="p">}),</span>

    <span class="c1"># Se realiza la división de recuadros entre el título y los demás objetos</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span>
    <span class="c1"># Imprimir gráfica de costos</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Graph</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;Graf_Cost_Tot&#39;</span><span class="p">),</span>

    <span class="c1"># Crear objeto para ingresar parametro de tasa de demanda con un control deslizante</span>
    <span class="n">dcc</span><span class="o">.</span><span class="n">Slider</span><span class="p">(</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="s1">&#39;TasaDemanda&#39;</span><span class="p">,</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nb">max</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span>
            <span class="n">value</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
            <span class="n">step</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="p">),</span>
    
    <span class="c1"># Crear objeto para especificar la tasa seleccionada por el usuario y las unidades</span>
    <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;valorSlider&#39;</span><span class="p">)</span>
    <span class="p">])</span>
<span class="p">])</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="c1"># Outputs que se van a modificar cuando el usuario interactua</span>
    <span class="p">[</span><span class="n">Output</span><span class="p">(</span><span class="s1">&#39;Graf_Cost_Tot&#39;</span><span class="p">,</span> <span class="s1">&#39;figure&#39;</span><span class="p">),</span>
     <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;valorSlider&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">)],</span>
     <span class="c1"># Input en el que se va a fijar el callback</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;TasaDemanda&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">)])</span>
<span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">Tasa</span><span class="p">):</span>
    <span class="c1"># Importamos la información de la funcion en Funciones.py</span>
    <span class="n">InfoCostos</span> <span class="o">=</span> <span class="n">dash_function</span><span class="p">(</span><span class="n">Tasa</span><span class="p">)</span>

    <span class="c1">#__________Generar gráfica de los costos para las próximas 10 semanas__________</span>
    <span class="c1"># cada variable trace guardada es una nueva curva a la gráfica</span>
    <span class="n">trace1</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;numero_semana&#39;</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;costo_semanal_PolActual&#39;</span><span class="p">],</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;P Actual&#39;</span>
    <span class="p">)</span>

    <span class="n">trace2</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Scatter</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;numero_semana&#39;</span><span class="p">],</span>
    <span class="n">y</span><span class="o">=</span><span class="n">InfoCostos</span><span class="p">[</span><span class="s1">&#39;costo_semanal_PolNueva&#39;</span><span class="p">],</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines+markers&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;P nueva&#39;</span>
    <span class="p">)</span>

    <span class="n">layout</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
    <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Costo por política en las próximas semanas&#39;</span><span class="p">,</span>
    <span class="n">xaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Semana&#39;</span><span class="p">),</span>
    <span class="n">yaxis</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;Costo&#39;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">Figure</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="n">trace1</span><span class="p">,</span> <span class="n">trace2</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">fig</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;Tasa seleccionada: </span><span class="si">{</span><span class="n">Tasa</span><span class="si">}</span><span class="s1"> cajas/semana&#39;</span>



<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./content\complementarias\Complementaria5"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../Complementaria4/Complementaria4.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><h3 style="color: #ADD8E6;">Complementaria 4: Manejo de datos y análisis preliminar en Python</h3></p>
      </div>
    </a>
    <a class="right-next"
       href="../Complementaria6.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><h3 style="color: #ADD8E6;">Complementaria 6: Análisis de tiempos promedio</h3></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Equipo Modelos Probabilísticos
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>